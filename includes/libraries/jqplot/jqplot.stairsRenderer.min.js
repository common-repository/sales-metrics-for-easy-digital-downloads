(function($){$.jqplot.StairsRenderer=function(){$.jqplot.LineRenderer.call(this)};
$.jqplot.StairsRenderer.prototype=new $.jqplot.LineRenderer();$.jqplot.StairsRenderer.prototype.constructor=$.jqplot.StairsRenderer;
$.jqplot.StairsRenderer.prototype.draw=function(ctx,gd,options,plot){var i;var opts=$.extend(true,{},options);
var shadow=(opts.shadow!=undefined)?opts.shadow:this.shadow;var showLine=(opts.showLine!=undefined)?opts.showLine:this.showLine;
var fill=(opts.fill!=undefined)?opts.fill:this.fill;var fillAndStroke=(opts.fillAndStroke!=undefined)?opts.fillAndStroke:this.fillAndStroke;
var xmin,ymin,xmax,ymax;ctx.save();if(gd.length){if(showLine){var tempgd=[];var stairNumberPoints=0;
var lastYPos=null;tempgd.push({0:0,1:gd[0]["1"]});for(var i=0;i<gd.length-1;i++){if(lastYPos===null){lastYPos=gd[i]["1"];
tempgd.push(gd[i]);tempgd.push({0:gd[i+1]["0"],1:gd[i]["1"]})}else{tempgd.push(gd[i]);
if((i+1)<gd.length){if(gd[i+1]["1"]){tempgd.push({0:gd[i+1]["0"],1:gd[i]["1"]})}}}}tempgd.push(gd[gd.length-1]);
tempgd.push({0:ctx.canvas.offsetWidth,1:gd[gd.length-1]["1"]});if(shadow){this.renderer.shadowRenderer.draw(ctx,tempgd,opts)
}this.renderer.shapeRenderer.draw(ctx,tempgd,opts)}var xmin=xmax=ymin=ymax=null;for(i=0;
i<this._areaPoints.length;i++){var p=this._areaPoints[i];if(xmin>p[0]||xmin==null){xmin=p[0]
}if(ymax<p[1]||ymax==null){ymax=p[1]}if(xmax<p[0]||xmax==null){xmax=p[0]}if(ymin>p[1]||ymin==null){ymin=p[1]
}}if(this.type==="line"&&this.renderer.bands.show){ymax=this._yaxis.series_u2p(this.renderer.bands._min);
ymin=this._yaxis.series_u2p(this.renderer.bands._max)}this._boundingBox=[[xmin,ymax],[xmax,ymin]];
if(this.markerRenderer.show&&!fill){if(this.renderer.smooth){gd=this.gridData}for(i=0;
i<gd.length;i++){if(gd[i][0]!=null&&gd[i][1]!=null){this.markerRenderer.draw(gd[i][0],gd[i][1],ctx,opts.markerOptions)
}}}}ctx.restore()};function postPlotDraw(){if(this.plugins.StairsRenderer&&this.plugins.StairsRenderer.highlightCanvas){this.plugins.StairsRenderer.highlightCanvas.resetCanvas();
this.plugins.StairsRenderer.highlightCanvas=null}this.plugins.StairsRenderer={highlightedSeriesIndex:null};
this.plugins.StairsRenderer.highlightCanvas=new $.jqplot.GenericCanvas();this.eventCanvas._elem.before(this.plugins.StairsRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-StairsRenderer-highlight-canvas",this._plotDimensions,this));
this.plugins.StairsRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(ev){unhighlight(ev.data.plot)
})}function highlight(plot,sidx,pidx,points){var s=plot.series[sidx];var canvas=plot.plugins.StairsRenderer.highlightCanvas;
canvas._ctx.clearRect(0,0,canvas._ctx.canvas.width,canvas._ctx.canvas.height);s._highlightedPoint=pidx;
plot.plugins.StairsRenderer.highlightedSeriesIndex=sidx;var opts={fillStyle:s.highlightColors[pidx]};
s.renderer.shapeRenderer.draw(canvas._ctx,points,opts);canvas=null}function unhighlight(plot){var canvas=plot.plugins.StairsRenderer.highlightCanvas;
canvas._ctx.clearRect(0,0,canvas._ctx.canvas.width,canvas._ctx.canvas.height);for(var i=0;
i<plot.series.length;i++){plot.series[i]._highlightedPoint=null}plot.plugins.StairsRenderer.highlightedSeriesIndex=null;
plot.target.trigger("jqplotDataUnhighlight");canvas=null}function handleMove(ev,gridpos,datapos,neighbor,plot){if(neighbor){var ins=[neighbor.seriesIndex,neighbor.pointIndex,neighbor.data];
var evt1=jQuery.Event("jqplotDataMouseOver");evt1.pageX=ev.pageX;evt1.pageY=ev.pageY;
plot.target.trigger(evt1,ins);if(plot.series[ins[0]].show&&plot.series[ins[0]].highlightMouseOver&&!(ins[0]==plot.plugins.StairsRenderer.highlightedSeriesIndex&&ins[1]==plot.series[ins[0]]._highlightedPoint)){var evt=jQuery.Event("jqplotDataHighlight");
evt.which=ev.which;evt.pageX=ev.pageX;evt.pageY=ev.pageY;plot.target.trigger(evt,ins);
highlight(plot,neighbor.seriesIndex,neighbor.pointIndex,neighbor.points)}}else{if(neighbor==null){unhighlight(plot)
}}}function handleMouseDown(ev,gridpos,datapos,neighbor,plot){if(neighbor){var ins=[neighbor.seriesIndex,neighbor.pointIndex,neighbor.data];
if(plot.series[ins[0]].highlightMouseDown&&!(ins[0]==plot.plugins.StairsRenderer.highlightedSeriesIndex&&ins[1]==plot.series[ins[0]]._highlightedPoint)){var evt=jQuery.Event("jqplotDataHighlight");
evt.which=ev.which;evt.pageX=ev.pageX;evt.pageY=ev.pageY;plot.target.trigger(evt,ins);
highlight(plot,neighbor.seriesIndex,neighbor.pointIndex,neighbor.points)}}else{if(neighbor==null){unhighlight(plot)
}}}function handleMouseUp(ev,gridpos,datapos,neighbor,plot){var idx=plot.plugins.StairsRenderer.highlightedSeriesIndex;
if(idx!=null&&plot.series[idx].highlightMouseDown){unhighlight(plot)}}function handleClick(ev,gridpos,datapos,neighbor,plot){if(neighbor){var ins=[neighbor.seriesIndex,neighbor.pointIndex,neighbor.data];
var evt=jQuery.Event("jqplotDataClick");evt.which=ev.which;evt.pageX=ev.pageX;evt.pageY=ev.pageY;
plot.target.trigger(evt,ins)}}function handleRightClick(ev,gridpos,datapos,neighbor,plot){if(neighbor){var ins=[neighbor.seriesIndex,neighbor.pointIndex,neighbor.data];
var idx=plot.plugins.StairsRenderer.highlightedSeriesIndex;if(idx!=null&&plot.series[idx].highlightMouseDown){unhighlight(plot)
}var evt=jQuery.Event("jqplotDataRightClick");evt.which=ev.which;evt.pageX=ev.pageX;
evt.pageY=ev.pageY;plot.target.trigger(evt,ins)}}})(jQuery);